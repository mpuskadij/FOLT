<ui:composition template="/predlozak.xhtml"
	xmlns:ui="jakarta.faces.facelets" xmlns:h="jakarta.faces.html"
	xmlns:f="jakarta.faces.core">

	<ui:define name="title">Plaćanje računa</ui:define>
	<ui:define name="content">
	<h:form id="formaDopune">
		
		<h:panelGroup rendered= "#{dopunaNarudzbe.poruka.isBlank()}" layout="block" style="margin-bottom:30px; border:1px solid #ccc; padding:10px;">

            <h:commandButton value="Stvori račun" action="#{dopunaNarudzbe.platiRacun}">
            	<f:ajax execute="@form" render="@form" />
            </h:commandButton>

    </h:panelGroup>

    <h:panelGrid id="naruceneStavke" columns="2" columnClasses="left,right" cellpadding="10" rendered= "#{dopunaNarudzbe.poruka.isBlank()}">

        <h:panelGroup layout="block">
            <h3>Naručena jela</h3>
            <h:dataTable value="#{dopunaNarudzbe.narucenaJela}" var="j" border="1">
                <h:column>
                    <f:facet name="header">Naziv</f:facet>
                    #{j.id()}
                </h:column>
                <h:column>
                    <f:facet name="header">Količina</f:facet>
                    #{j.kolicina()}
                </h:column>
                <h:column>
                    <f:facet name="header">Cijena</f:facet>
                    #{j.cijena()}
                </h:column>
                <h:column>
                    <f:facet name="header">Iznos</f:facet>
                    #{j.kolicina() * j.cijena()}
                </h:column>
            </h:dataTable>
        </h:panelGroup>

        <h:panelGroup layout="block">
            <h3>Naručena pića</h3>
            <h:dataTable value="#{dopunaNarudzbe.narucenaPica}" var="p" border="1">
                <h:column>
                    <f:facet name="header">Naziv</f:facet>
                    #{p.id()}
                </h:column>
                <h:column>
                    <f:facet name="header">Količina</f:facet>
                    #{p.kolicina()}
                </h:column>
                <h:column>
                    <f:facet name="header">Cijena</f:facet>
                    #{p.cijena()}
                </h:column>
                <h:column>
                    <f:facet name="header">Iznos</f:facet>
                    #{p.kolicina() * p.cijena()}
                </h:column>
            </h:dataTable>
        </h:panelGroup>

    </h:panelGrid>
    <h:outputText id="poruka" value="#{dopunaNarudzbe.poruka}" /> 
	</h:form>
	
    
    
    
	</ui:define>
	<ui:define name="nav">
	</ui:define>	
</ui:composition>